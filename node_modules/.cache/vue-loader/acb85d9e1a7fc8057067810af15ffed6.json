{"remainingRequest":"D:\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\CardDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\CardDetail.vue","mtime":1584003808000},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBjb21wb25lbnRzDQppbXBvcnQgRGF0ZXRpbWVQaWNrZXIgZnJvbSAnLi9EYXRldGltZVBpY2tlcicNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZWxlY3RJdGVtczogbnVsbCwNCiAgICAgIHNlbGVjdGVkTGlzdDogW10sDQogICAgICBzZWxlY3RlZE5hbWU6IG51bGwsDQoNCiAgICAgIGxpc3RJdGVtczogW10sDQogICAgICBpdGVtTmV3OiB7fSwNCiAgICAgIGR1cmF0aW9uOiBbXSwNCg0KICAgICAgcnVsZXM6IHRoaXMuZGVmYXVsdENhcmREZXRhaWwucnVsZXNJbnB1dCwNCg0KICAgICAgaXNPazogZmFsc2UsDQogICAgICBsaXN0TGFiZWxEYXlUaW1lOiBbJ+i1t+Wni+aZgumWkycsJ+aIquiHs+aZgumWkyddLA0KICAgICANCiAgICB9DQogIH0sDQoNCg0KICBwcm9wczogWydkZWZhdWx0Q2FyZERldGFpbCcsICdjb250ZW50Q2FyZERldGFpbCcsICdkYXRldGltZURlZmF1bHQnXSwNCg0KDQogIGNvbXB1dGVkOiB7DQogICAgc2VsZWN0aW9uc1VwZGF0ZWQoKSB7DQogICAgICBsZXQgbGlzdCA9IFsuLi50aGlzLmxpc3RJdGVtc10NCg0KICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc2VsZWN0ZWRMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBpbmRleCA9IGxpc3QuaW5kZXhPZih0aGlzLnNlbGVjdGVkTGlzdFtpXS5uYW1lKQ0KICAgICAgICBsaXN0LnNwbGljZShpbmRleCwgMSkNCiAgICAgIH0NCiAgICAgIHJldHVybiBsaXN0DQogICAgfSwNCg0KICAgIGRhdGV0aW1lRnJvbUluaXRpYXRlZDogZnVuY3Rpb24gKCkgeyAgLy8g6Iul54ShZHVyYXRpb24gcHJvcHPpgLLkvobvvIzliYfkvb/nlKjku4rlpKnpm7bmmYINCiAgICAgIGxldCBkYXRldGltZSA9IG51bGwNCiAgICAgIGlmKHRoaXMuZHVyYXRpb24ubGVuZ3RoID4gMCl7DQogICAgICAgIGRhdGV0aW1lID0gbmV3IERhdGUodGhpcy5kdXJhdGlvblswXSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRhdGV0aW1lID0gbmV3IERhdGUoKQ0KICAgICAgICBkYXRldGltZS5zZXRIb3VycygwLCAwLCAwKQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGRhdGV0aW1lDQogICAgfSwNCg0KICAgIGRhdGV0aW1lVG9Jbml0aWF0ZWQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGxldCBkYXRldGltZSA9IG51bGwNCiAgICAgIGlmKHRoaXMuZHVyYXRpb24ubGVuZ3RoID4gMCl7DQogICAgICAgIGRhdGV0aW1lID0gbmV3IERhdGUodGhpcy5kdXJhdGlvblsxXSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRhdGV0aW1lID0gbmV3IERhdGUoKQ0KICAgICAgICBkYXRldGltZS5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpDQogICAgICB9DQogICAgICByZXR1cm4gZGF0ZXRpbWUNCiAgICB9LA0KICB9LA0KDQoNCiAgbWV0aG9kczogew0KICAgIGRpYWxvZ0Nsb3NlcigpIHsNCiAgICAgIHRoaXMuc2VsZWN0RXJhc2VyKCkNCiAgICAgIHRoaXMuc2VsZXRlZE5hbWUgPSBudWxsDQogICAgICB0aGlzLiRlbWl0KCdkaWFsb2dDbG9zZScpDQogICAgfSwNCg0KICAgIGRhdGFTYXZlcigpIHsNCiAgICAgIHRoaXMuaXRlbUFkZGVyKCkNCiAgICAgIGxldCBvYmogPSB7fQ0KICAgICAgb2JqLm5hbWUgPSB0aGlzLnNlbGVjdGVkTmFtZQ0KICAgICAgb2JqLmNvbnRlbnQgPSB0aGlzLnNlbGVjdGVkTGlzdA0KICAgICAgb2JqLmRhdGV0aW1lRnJvbSA9IHRoaXMuZGF0ZXRpbWVGcm9tDQogICAgICBvYmouZGF0ZXRpbWVUbyA9IHRoaXMuZGF0ZXRpbWVUbw0KDQogICAgICBsZXQgaW5kZXhMYXN0ID0gb2JqLmNvbnRlbnQubGVuZ3RoIC0gMQ0KDQogICAgICBpZihvYmouY29udGVudFtpbmRleExhc3RdLm5hbWUgPT0gJycgfHwgb2JqLmNvbnRlbnRbaW5kZXhMYXN0XS5uYW1lID09IG51bGwpew0KICAgICAgICBvYmouY29udGVudC5zcGxpY2UoaW5kZXhMYXN0LCAxKQ0KICAgICAgfQ0KDQogICAgICBpZihvYmoubmFtZSAhPSBudWxsICYmIG9iai5uYW1lICE9ICcnKXsNCiAgICAgICAgaWYodGhpcy5pc09rKSB7DQogICAgICAgICAgdGhpcy4kZW1pdCgnZGF0YVRyYW5zcG9ydCcsIG9iaikNCiAgICAgICAgICB0aGlzLmRpYWxvZ0Nsb3NlcigpDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFsZXJ0KCflkI3nqLHmnKrloavlpqUnKQ0KICAgICAgfQ0KICAgICAgDQogICAgfSwNCg0KICAgICAvLyB0cmFzbnBvcnQgZGF0ZXRpbWUgYXMgdW5peCB0aW1lc3RhbXANCiAgICBmcm9tRGF0ZVNldHRlcjogZnVuY3Rpb24gKGRhdGV0aW1lKSB7DQogICAgICB0aGlzLmRhdGV0aW1lRnJvbSA9IGRhdGV0aW1lDQogICAgfSwNCiAgICAvLyB0cmFzbnBvcnQgZGF0ZXRpbWUgYXMgdW5peCB0aW1lc3RhbXANCiAgICB0b0RhdGVTZXR0ZXI6IGZ1bmN0aW9uIChkYXRldGltZSkgew0KICAgICAgdGhpcy5kYXRldGltZVRvID0gZGF0ZXRpbWUNCiAgICB9LA0KICAgIA0KICAgIHNlbGVjdEVyYXNlcjogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLnNlbGVjdEl0ZW1zID0gbnVsbA0KICAgICAgdGhpcy5zZWxlY3RlZExpc3QgPSBbXQ0KICAgICAgdGhpcy5saXN0SXRlbXMgPSBbXQ0KICAgICAgdGhpcy5kdXJhdGlvbiA9IFtdDQogICAgICB0aGlzLml0ZW1OZXcgPSB7IG5hbWU6ICcnLCBudW06IDAgfQ0KICAgIH0sDQoNCiAgICBzZWxlY3RJbml0aWF0b3IoKSB7DQogICAgICB0aGlzLnNlbGVjdEVyYXNlcigpDQogICAgICANCiAgICAgIGlmICh0aGlzLmNvbnRlbnRDYXJkRGV0YWlsICE9IG51bGwpIHsNCiAgICAgICAgdGhpcy5zZWxlY3RlZE5hbWUgPSB0aGlzLmNvbnRlbnRDYXJkRGV0YWlsLm5hbWUNCiAgICAgICAgdGhpcy5zZWxlY3RlZExpc3QgPSB0aGlzLmNvbnRlbnRDYXJkRGV0YWlsLmNvbnRlbnQNCg0KICAgICAgICBsZXQgZHVyYXRpb25zID0gdGhpcy5jb250ZW50Q2FyZERldGFpbC5kdXJhdGlvbi5zcGxpdCgnLScpDQogICAgICAgIHRoaXMuZHVyYXRpb24ucHVzaChOdW1iZXIoZHVyYXRpb25zWzBdICogMTAwMCksIE51bWJlcihkdXJhdGlvbnNbMV0gKiAxMDAwKSkNCiAgICAgIH0gDQogICAgICAvLyAyIGZ1bmN0aW9ucyBpbiB0aGlzIG1ldGhvZA0KICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZGVmYXVsdENhcmREZXRhaWwubGlzdERhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgLy8gZmlsbCB2YWx1ZSBpbnRvIGxpc3QNCiAgICAgICAgdGhpcy5saXN0SXRlbXMucHVzaCh0aGlzLmRlZmF1bHRDYXJkRGV0YWlsLmxpc3REYXRhW2ldLm5hbWUpDQoNCiAgICAgICAgLy8gc2V0IGZpcnN0IHZhbHVlDQogICAgICAgIGlmKHRoaXMuZGVmYXVsdENhcmREZXRhaWwuZGVmYXVsdERhdGEuaWQgPT09IHRoaXMuZGVmYXVsdENhcmREZXRhaWwubGlzdERhdGFbaV0uaWQpIHsNCiAgICAgICAgICB0aGlzLml0ZW1OZXcubmFtZSA9IHRoaXMuZGVmYXVsdENhcmREZXRhaWwubGlzdERhdGFbaV0ubmFtZQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCg0KICAgIGl0ZW1BZGRlcigpIHsNCiAgICAgIHRoaXMuaXNPayA9IGZhbHNlDQogICAgICBsZXQgbnVtID0gTnVtYmVyKHRoaXMuaXRlbU5ldy5udW0pDQoNCiAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0lMSA9PT0gMCkgew0KICAgICAgICB0aGlzLnNlbGVjdGVkTGlzdC5wdXNoKHRoaXMuaXRlbU5ldykNCiAgICAgICAgdGhpcy5pdGVtTmV3ID0geyBuYW1lOiBudWxsLCBudW06IDAgfQ0KICAgICAgICB0aGlzLmlzT2sgPSB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICBhbGVydCgn5pW45a2X5qC85byP6Ly45YWl6Yyv6KqkJykNCiAgICAgIH0NCiAgICB9LA0KDQogICAgaXRlbVJlbW92ZXIoaW5kZXgpIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWRMaXN0LnNwbGljZShpbmRleCwgMSkNCiAgICB9LA0KICB9LA0KDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnNlbGVjdEluaXRpYXRvcigpDQogIH0sDQoNCg0KICBjb21wb25lbnRzOiB7DQogICAgRGF0ZXRpbWVQaWNrZXINCiAgfQ0KfQ0K"},{"version":3,"sources":["CardDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA","file":"CardDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <span class=\"headline\">新增 {{ defaultCardDetail.title }}</span>\r\n    </v-card-title>\r\n\r\n    <v-card-text>\r\n      \r\n      <v-text-field :label=\"defaultCardDetail.labelTextFieldTitle\" v-model=\"selectedName\" class=\"mr-12 pr-12\"/>\r\n\r\n\r\n      <div v-if=\"selectedList[0]\">\r\n        <v-row\r\n          v-for=\"(itemSelectedList, indexSelectedList) in selectedList\"\r\n          :key=\"indexSelectedList\"\r\n        >\r\n          <v-col cols=\"5\">  \r\n            <v-select\r\n              class=\"pa-1\"\r\n              v-model=\"itemSelectedList.name\"\r\n              :label=\"defaultCardDetail.labelSelect\"\r\n              :items=\"listItems\"\r\n            />\r\n          </v-col>\r\n\r\n          <v-col cols=\"5\">\r\n            <v-text-field\r\n              :label=\"defaultCardDetail.labelTextFieldContent\"\r\n              v-model=\"itemSelectedList.num\"\r\n              :rules=\"[rules.number, rules.zero, rules.float]\"\r\n              type=\"Number\"\r\n              class=\"pa-1\"\r\n            />\r\n          </v-col>\r\n\r\n          <v-col cols=\"2\">\r\n            <v-btn\r\n              color=\"warning\"\r\n              small\r\n              fab\r\n              @click=\"itemRemover(indexSelectedList)\"\r\n            >\r\n              <v-icon>mdi-minus</v-icon>\r\n            </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </div>\r\n\r\n\r\n      <v-row>\r\n        <v-col cols=\"5\">\r\n        <v-select\r\n          class=\"pa-1\"\r\n          v-model=\"itemNew.name\"\r\n          :items=\"selectionsUpdated\"\r\n        />\r\n        </v-col>\r\n        <v-col cols=\"5\">\r\n          <v-text-field\r\n            class=\"pa-1\"\r\n            :label=\"defaultCardDetail.labelTextFieldContent\"\r\n            :rules=\"[rules.number]\"\r\n            v-model=\"itemNew.num\"\r\n          />\r\n        </v-col>\r\n        <v-col cols=\"2\">\r\n          <v-btn\r\n            color=\"primary\"\r\n            small\r\n            fab\r\n            @click=\"itemAdder\"\r\n          >\r\n            <v-icon>mdi-plus</v-icon>\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n\r\n\r\n      <v-row class=\"mr-12\">\r\n        <v-col cols=\"12\" sm=\"6\" >\r\n          <DatetimePicker\r\n            :datetimeDefault=\"datetimeFromInitiated\"\r\n            :labelDatetime=\"listLabelDayTime[0]\"\r\n            @datetimeTransport=\"fromDateSetter\"\r\n          />\r\n        </v-col>\r\n        <v-col cols=\"12\" sm=\"6\">\r\n          <DatetimePicker\r\n            :datetimeDefault=\"datetimeToInitiated\"\r\n            :labelDatetime=\"listLabelDayTime[1]\"\r\n            @datetimeTransport=\"toDateSetter\"\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n    </v-card-text>\r\n\r\n    <v-card-actions>\r\n      <v-spacer />\r\n      <v-btn color=\"warning\" @click=\"dialogCloser\">取消</v-btn>\r\n      <v-btn color=\"green darken-1\" dark @click=\"dataSaver\">儲存</v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n \r\n</template>\r\n\r\n<script>\r\n// components\r\nimport DatetimePicker from './DatetimePicker'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectItems: null,\r\n      selectedList: [],\r\n      selectedName: null,\r\n\r\n      listItems: [],\r\n      itemNew: {},\r\n      duration: [],\r\n\r\n      rules: this.defaultCardDetail.rulesInput,\r\n\r\n      isOk: false,\r\n      listLabelDayTime: ['起始時間','截至時間'],\r\n     \r\n    }\r\n  },\r\n\r\n\r\n  props: ['defaultCardDetail', 'contentCardDetail', 'datetimeDefault'],\r\n\r\n\r\n  computed: {\r\n    selectionsUpdated() {\r\n      let list = [...this.listItems]\r\n\r\n      for(let i = 0; i < this.selectedList.length; i++) {\r\n        let index = list.indexOf(this.selectedList[i].name)\r\n        list.splice(index, 1)\r\n      }\r\n      return list\r\n    },\r\n\r\n    datetimeFromInitiated: function () {  // 若無duration props進來，則使用今天零時\r\n      let datetime = null\r\n      if(this.duration.length > 0){\r\n        datetime = new Date(this.duration[0])\r\n      } else {\r\n        datetime = new Date()\r\n        datetime.setHours(0, 0, 0)\r\n      }\r\n      return datetime\r\n    },\r\n\r\n    datetimeToInitiated: function () {\r\n      let datetime = null\r\n      if(this.duration.length > 0){\r\n        datetime = new Date(this.duration[1])\r\n      } else {\r\n        datetime = new Date()\r\n        datetime.setHours(23, 59, 59, 999)\r\n      }\r\n      return datetime\r\n    },\r\n  },\r\n\r\n\r\n  methods: {\r\n    dialogCloser() {\r\n      this.selectEraser()\r\n      this.seletedName = null\r\n      this.$emit('dialogClose')\r\n    },\r\n\r\n    dataSaver() {\r\n      this.itemAdder()\r\n      let obj = {}\r\n      obj.name = this.selectedName\r\n      obj.content = this.selectedList\r\n      obj.datetimeFrom = this.datetimeFrom\r\n      obj.datetimeTo = this.datetimeTo\r\n\r\n      let indexLast = obj.content.length - 1\r\n\r\n      if(obj.content[indexLast].name == '' || obj.content[indexLast].name == null){\r\n        obj.content.splice(indexLast, 1)\r\n      }\r\n\r\n      if(obj.name != null && obj.name != ''){\r\n        if(this.isOk) {\r\n          this.$emit('dataTransport', obj)\r\n          this.dialogCloser()\r\n        }\r\n      } else {\r\n        alert('名稱未填妥')\r\n      }\r\n      \r\n    },\r\n\r\n     // trasnport datetime as unix timestamp\r\n    fromDateSetter: function (datetime) {\r\n      this.datetimeFrom = datetime\r\n    },\r\n    // trasnport datetime as unix timestamp\r\n    toDateSetter: function (datetime) {\r\n      this.datetimeTo = datetime\r\n    },\r\n    \r\n    selectEraser: function() {\r\n      this.selectItems = null\r\n      this.selectedList = []\r\n      this.listItems = []\r\n      this.duration = []\r\n      this.itemNew = { name: '', num: 0 }\r\n    },\r\n\r\n    selectInitiator() {\r\n      this.selectEraser()\r\n      \r\n      if (this.contentCardDetail != null) {\r\n        this.selectedName = this.contentCardDetail.name\r\n        this.selectedList = this.contentCardDetail.content\r\n\r\n        let durations = this.contentCardDetail.duration.split('-')\r\n        this.duration.push(Number(durations[0] * 1000), Number(durations[1] * 1000))\r\n      } \r\n      // 2 functions in this method\r\n      for(let i = 0; i < this.defaultCardDetail.listData.length; i++) {\r\n        // fill value into list\r\n        this.listItems.push(this.defaultCardDetail.listData[i].name)\r\n\r\n        // set first value\r\n        if(this.defaultCardDetail.defaultData.id === this.defaultCardDetail.listData[i].id) {\r\n          this.itemNew.name = this.defaultCardDetail.listData[i].name\r\n        }\r\n      }\r\n    },\r\n\r\n    itemAdder() {\r\n      this.isOk = false\r\n      let num = Number(this.itemNew.num)\r\n\r\n      if (!isNaN(num) && num%1 === 0) {\r\n        this.selectedList.push(this.itemNew)\r\n        this.itemNew = { name: null, num: 0 }\r\n        this.isOk = true\r\n      } else {\r\n        alert('數字格式輸入錯誤')\r\n      }\r\n    },\r\n\r\n    itemRemover(index) {\r\n      this.selectedList.splice(index, 1)\r\n    },\r\n  },\r\n\r\n\r\n  created() {\r\n    this.selectInitiator()\r\n  },\r\n\r\n\r\n  components: {\r\n    DatetimePicker\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}